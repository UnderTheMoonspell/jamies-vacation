{"version":3,"sources":["assets sync /^/.//.*/.jpg$","assets/amsterdam.jpg","assets/budapest.jpg","assets/madrid.jpg","components/CustomLoader/CustomLoader.tsx","components/CustomSort/CustomSort.tsx","config.tsx","services/api.service.ts","hooks/api.hook.ts","hooks/use-effect-skip-first.hook.ts","components/CustomSearch/CustomSearch.tsx","components/CityItem/CityItem.tsx","components/CityCard/CityCard.tsx","containers/Home/Home.tsx","hooks/city.hook.ts"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","CustomLoader","className","Loader","active","content","CustomSort","onSortFieldChange","props","Select","onChange","event","data","value","Config","destinations","name","weatherBaseUrl","kiwiBaseURL","geoDBAPIKey","geoDBRapidHpst","dateFormat","endpoints","GET_WEATHER_BY_CITY","city","LOCATIONS","term","GET_TICKET_INFO","from","to","dateFrom","dateTo","Api","baseUrl","instance","_initializeResponseInterceptor","interceptors","response","use","_handleResponse","_handleError","error","Promise","reject","get","url","config","post","payload","this","axios","create","baseURL","weatherAPI","kiwiAPI","initialOptions","isLoading","result","method","headers","useAPI","APIInstance","useState","apiOptions","setApiOptions","updateState","updatedProps","callback","inputs","isFirstRun","useRef","useEffect","current","useEffectSkipFirstRun","executeApiCall","a","locations","setUrl","CustomSearch","React","memo","searchTerm","setSearchTerm","handleSearchChange","target","length","canShowResults","useMemo","findIndex","destination","getFilteredResults","filter","auto-complete","type","tab-index","data-testid","aria-hidden","searchResult","key","onClick","clickHandler","clickItem","renderedItem","CityItem","country","toLowerCase","CityCard","Card","is_best","Label","color","ribbon","Image","src","require","wrapped","ui","Content","Header","Meta","Description","alt","weather","icon","temp","humidity","price","Home","selectedCity","setSelectedCity","cities","setCities","setIsLoading","getCityWeather","cityWeather","feels_like","main","toFixed","all","getDestinationsWeather","getPriceInfo","moment","Date","format","add","days","ticketInfo","newState","orderBy","getDestinationsPrices","sortCities","field","direction","split","useCity","onSearchSelect","useCallback","targetCity","prevCity","renderSearchItem","areResultsFetched","placeholder","options","text","sortField","idx"],"mappings":"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","file":"static/js/4.a5c2642c.chunk.js","sourcesContent":["var map = {\n\t\"./amsterdam.jpg\": 187,\n\t\"./budapest.jpg\": 188,\n\t\"./madrid.jpg\": 189\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 186;","module.exports = __webpack_public_path__ + \"static/media/amsterdam.5b747391.jpg\";","module.exports = __webpack_public_path__ + \"static/media/budapest.2b3e1a91.jpg\";","module.exports = __webpack_public_path__ + \"static/media/madrid.3ba5be59.jpg\";","import React from 'react';\nimport './CustomLoader.scss'\nimport {  Loader } from 'semantic-ui-react';\n\nexport const CustomLoader = () => {\n  return (\n    <div className=\"custom-loader\">\n      <Loader active content=\"Loading...\" /> \n    </div>\n  );\n};","import React, { SyntheticEvent } from 'react';\nimport './CustomSort.scss';\nimport { DropdownItemProps, DropdownProps, Select } from 'semantic-ui-react';\n\nexport type CustomSortProps = {\n  options: DropdownItemProps[];\n  name: string;\n  placeholder: string;\n  onSortFieldChange: (sortField: string) => void;\n}\n\nexport const CustomSort: React.FC<CustomSortProps> = ({onSortFieldChange, ...props}) => {\n\n  const customChange = (event: SyntheticEvent<HTMLElement, Event>, data: DropdownProps) => {\n    onSortFieldChange(data.value! as string)\n  }\n\n  return (\n    <Select\n      className=\"custom-sort\"\n      {...props}\n      onChange={customChange} />\n  )\n}\n","const OpenWeatherAPIKeyQS: string = `&appid=f0e307920b21ae38564d922c31d05753`;\n\nexport default class Config {\n  static destinations: any[] = [\n    {\n      name: 'Amsterdam',\n      code: 'AMS',\n    },\n    {\n      name: 'Madrid',\n      code: 'MAD',\n    },\n    {\n      name: 'Budapest',\n      code: 'BUD',\n    },\n  ];\n\n  static weatherBaseUrl: string = `https://api.openweathermap.org/data/2.5`;\n  static kiwiBaseURL: string = `https://api.skypicker.com`;\n\n  static geoDBAPIKey: string =\n    'e4eb504fb1msh555eb5f9d12b8bdp190b61jsn65b06d4870d1';\n  static geoDBRapidHpst: string = 'wft-geo-db.p.rapidapi.com';\n\n  static dateFormat = 'DD/MM/yyyy';\n\n  static endpoints = {\n    GET_WEATHER_BY_CITY: (city: string) =>\n      `/weather?q=${city}${OpenWeatherAPIKeyQS}&units=metric`,\n    LOCATIONS: (term: string) =>\n      `/locations?term=${term}&location_types=airport&sort=name`,\n    GET_TICKET_INFO: (\n      from: string,\n      to: string,\n      dateFrom: string,\n      dateTo: string\n    ) =>\n      `/flights?flyFrom=${from}&to=${to}&date_from=${dateFrom}&date_to=${dateTo}&curr=EURmax_stopovers=0&sort=price&limit=1&partner=picky`,\n  };\n}\n","import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\nimport Config from 'config';\n\ndeclare module 'axios' {\n  interface AxiosResponse<T = any> extends Promise<T> {}\n}\n\nclass Api {\n  protected readonly instance: AxiosInstance;\n\n  public constructor(baseUrl: string) {\n    this.instance = axios.create({\n      baseURL: baseUrl\n    });\n\n    this._initializeResponseInterceptor();\n  }\n\n  private _initializeResponseInterceptor = () => {\n    this.instance.interceptors.response.use(\n      this._handleResponse,\n      this._handleError,\n    );\n  };\n\n  private _handleResponse = ({ data }: AxiosResponse) => data;\n\n  protected _handleError = (error: any) => Promise.reject(error);\n\n  public get = (url: string, config?: AxiosRequestConfig) : Promise<AxiosResponse<any>> => {\n    return this.instance.get(url, config);\n  }\n\n  public post = (url:string, payload: object) : Promise<AxiosResponse<any>> => {\n    return this.instance.post(url, payload);\n  }\n\n}\n\nexport const weatherAPI = new Api(Config.weatherBaseUrl)\nexport const kiwiAPI = new Api(Config.kiwiBaseURL)","import { useState } from \"react\";\nimport { useEffectSkipFirstRun } from \"./use-effect-skip-first.hook\";\n\nexport type APIHook = {\n  result: any;\n  isLoading: boolean;\n  setUrl: (url: string, method: string) => {};\n  error: string;\n};\n\nconst initialOptions = {\n  isLoading: false,\n  result: [],\n  url: '',\n  method: '',\n  error: '',\n  headers: {}\n};\n\nexport const useAPI = (APIInstance: any) => {\n  const [apiOptions, setApiOptions] = useState(initialOptions);\n\n  const updateState = (updatedProps: any) =>\n    setApiOptions({ ...initialOptions, ...updatedProps });\n\n  const setUrl = (url: string, method: string, headers: any) => {\n    updateState({ url, method, headers });\n  }\n\n  useEffectSkipFirstRun(() => {\n    const executeApiCall = async () => {\n      try {\n        updateState({ isLoading: true });\n        const { locations } = await (APIInstance as any)[apiOptions.method](apiOptions.url);\n        updateState({ result: locations, isLoading: false });\n      } catch (ex) {\n        updateState({ error: ex });\n      }\n    }\n    apiOptions.url && executeApiCall()\n\n  }, [apiOptions.url, apiOptions.method]);\n\n  return {\n    isLoading: apiOptions.isLoading,\n    result: apiOptions.result,\n    setUrl,\n  } as APIHook;\n};\n","import { useEffect, useRef } from 'react';\n\nexport const useEffectSkipFirstRun = (callback: Function, inputs: Array<any>) => {\n  const isFirstRun = useRef(true);\n  useEffect (() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n    callback()\n  }, [callback, inputs]);\n}","import Config from 'config';\nimport { useAPI } from 'hooks/api.hook';\nimport React, { ReactElement, useMemo, useState } from 'react';\nimport { kiwiAPI } from 'services/api.service';\nimport { CityItem } from '../CityItem/CityItem';\n\ntype SearchRenderComponents = typeof CityItem;\n\ntype SearchRenderComponentsProps = any;\n\ntype SearchComponentProps = {\n  renderedItem: (\n    props: SearchRenderComponentsProps\n  ) => ReactElement<SearchRenderComponents>;\n  url: (searchTerm: string) => string;\n  clickHandler: (searchResult: any) => void; //TODO type,\n};\n\n// TODO clear button in this component or checking the click event and hide the results if\n// target outside the dropdownlist\n\nexport const CustomSearch: React.FC<SearchComponentProps> = React.memo(\n  (props) => {\n    const [searchTerm, setSearchTerm] = useState('');\n    const { isLoading, result, setUrl } = useAPI(kiwiAPI);\n\n    const handleSearchChange = async (\n      event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n      const searchTerm = event.target.value || '';\n      setSearchTerm(searchTerm);\n      if (searchTerm.length < 3) return;\n      setUrl(props.url(searchTerm), 'get');\n    };\n\n\n    const canShowResults = useMemo(() => {\n      return (result?.length > 1 && searchTerm.length >= 3) ||\n      (result?.length === 1 &&\n        Config.destinations.findIndex(\n          (destination) => destination.name === result[0].city.name\n        ) < 0);\n    }, [result, searchTerm])\n\n    // Do not show the destinations\n    const getFilteredResults = useMemo(() => {\n      return canShowResults ? result.filter(\n        (city: any) =>\n          Config.destinations.findIndex(\n            (destination) => destination.name === city.city.name\n          ) < 0\n      ) as any[] : [];\n    }, [canShowResults, result]);\n\n    const clickItem = (searchResult: any) => {\n      props.clickHandler(searchResult);\n      setSearchTerm('');\n    };\n\n    return (\n      <div className={`ui search ${isLoading && 'loading'}`}>\n        <div className='ui icon input'>\n          <input\n            auto-complete='off'\n            type='text'\n            tab-index='0'\n            className='prompt'\n            value={searchTerm}\n            onChange={handleSearchChange}\n            data-testid='search-input'\n          />\n          <i aria-hidden='true' className='search icon'></i>\n        </div>\n        <div\n          className={`results transition ${!!searchTerm.length && 'visible'}`}\n          data-testid='results-container'\n        >\n          {canShowResults ? (\n            getFilteredResults.map((searchResult: any) => (\n              <div\n                className='result'\n                key={searchResult.id}\n                onClick={(e: React.MouseEvent<HTMLInputElement>) =>\n                  clickItem(searchResult)\n                }\n              >\n                <props.renderedItem {...searchResult} />\n              </div>\n            ))\n          ) : (\n            <div className='message empty'>\n              <div className='header'>No results found.</div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n","import React from 'react';\nimport './CityItem.scss'\n\nexport const CityItem : React.FC<any> = (props) => {\n  return (\n    <div className=\"city-item\">\n      {props.city.name}\n      <span className=\"airport\">{props.name}</span>\n      <i className={`${props.city.country?.code.toLowerCase()} flag`}></i>\n    </div>\n  );\n};","import { City } from 'models/City';\nimport React from 'react';\nimport { Card, Image, Label } from 'semantic-ui-react';\nimport './CityCard.scss';\n\nexport type CityCardProps = {\n  is_best: boolean;\n  city: City;\n};\n\nexport const CityCard: React.FC<CityCardProps> = (props) => {\n  return (\n    <Card className='city-card'>\n      {props.is_best && (\n        <Label color={'red'} ribbon>\n          Best\n        </Label>\n      )}\n      <Image\n        className='city-image'\n        src={require(`../../assets/${props.city.name.toLowerCase()}.jpg`)}\n        wrapped\n        ui={false}\n      />\n      <Card.Content>\n        <Card.Header>{props.city.name}</Card.Header>\n        <Card.Meta>\n        </Card.Meta>\n        <Card.Description>\n          <img\n            alt='weather icon'\n            src={`https://openweathermap.org/img/wn/${props.city.weather?.icon}.png`}\n            className='weather-icon'\n          ></img>\n          <div className=\"weather-info\">\n            <span data-testid=\"temperature\">Temperature: {props.city.weather?.temp} º</span>\n            <span>Humidity: {props.city.weather?.humidity} %</span>\n          </div>\n          <span className=\"price-info\" data-testid=\"price\">{props.city.price}€</span>\n        </Card.Description>\n      </Card.Content>\n    </Card>\n  );\n};\n","import { CustomLoader } from 'components/CustomLoader/CustomLoader';\nimport { CustomSort } from 'components/CustomSort/CustomSort';\nimport Config from 'config';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { DropdownItemProps } from 'semantic-ui-react';\nimport './Home.scss';\nimport { useCity } from 'hooks/city.hook';\nimport { City } from 'models/City';\nimport { CustomSearch } from 'components/CustomSearch/CustomSearch';\nimport { CityItem } from 'components/CityItem/CityItem';\nimport { CityCard } from 'components/CityCard/CityCard';\n\nconst Home = () => {\n  const [selectedCity, setSelectedCity] = useState();\n  const { cities, isLoading, sortCities } = useCity(selectedCity);\n\n  const onChangeSort = (sortField: string) => {\n    sortCities(\n      sortField.split('|')[0],\n      sortField.split('|')[1] as 'desc' | 'asc'\n    );\n  };\n\n  const onSearchSelect = useCallback(\n    (targetCity) => setSelectedCity((prevCity) => targetCity),\n    []\n  );\n\n  const renderSearchItem = useCallback(\n    (props: any) => <CityItem {...props} />,\n    []\n  );\n\n  const areResultsFetched = useMemo(() => cities[0]?.price, [cities]);\n\n  const sortOptions = [\n    {\n      text: 'Weather',\n      value: 'feels_like|desc',\n    },\n    {\n      text: 'Price',\n      value: 'price|asc',\n    },\n    {\n      text: 'Price & Weather',\n      value: 'price,feels_like|asc,desc',\n    },\n  ] as DropdownItemProps[];\n\n  const getCitiesInfo = () =>\n    cities.map((city: City, idx: number) => (\n      <CityCard key={city.id} city={city} is_best={!idx} />\n    ));\n\n  return (\n    <div className='home'>\n      <h1>Going back to office planner</h1>\n      <h3>Where are you flying from ?</h3>\n      <CustomSearch\n        url={Config.endpoints.LOCATIONS}\n        renderedItem={renderSearchItem}\n        clickHandler={onSearchSelect}\n      />\n      {isLoading ? (\n        <CustomLoader />\n      ) : (\n        areResultsFetched && (\n          <>\n            <CustomSort\n              name='city-sort'\n              placeholder='Sort By'\n              options={sortOptions}\n              onSortFieldChange={onChangeSort}\n              data-testid='city-sort'\n            />\n            <div className='results-container'>{getCitiesInfo()}</div>\n          </>\n        )\n      )}\n    </div>\n  );\n};\n\nexport default Home;\n","import Config from 'config';\nimport orderBy from 'lodash.orderby';\nimport { City } from 'models/City';\nimport { Weather } from 'models/Weather';\nimport { useEffect, useState } from 'react';\nimport { kiwiAPI, weatherAPI } from 'services/api.service';\nimport moment from 'moment';\n\nexport type CityHook = {\n  cities: City[];\n  isLoading: boolean;\n  sortCities: (field: string, direction: string) => void;\n};\n\nexport const useCity = (selectedCity: any) => {\n  const [cities, setCities] = useState<City[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  const sortCities = (field: string, direction: string) => \n    setCities(orderBy(cities,field.split(','),direction.split(',') as ('asc' | 'desc')[]));\n\n  const getCityWeather = async (city: City) => {\n    //TODO rework apiHook to accept consecutive updates\n    let cityWeather = await weatherAPI.get(\n      Config.endpoints.GET_WEATHER_BY_CITY(city.name) //TODO Types for destination cities\n    );\n    setCities((cities) => [\n      ...cities,\n      {\n        name: city.name,\n        feels_like: cityWeather.main.feels_like,\n        weather: {\n          icon: cityWeather.weather[0].icon,\n          humidity: cityWeather.main.humidity,\n          temp: cityWeather.main.temp.toFixed(1),\n        } as Weather,\n      } as City,\n    ]);\n  };\n\n  useEffect(() => {\n    const getDestinationsWeather = async () =>\n      await Promise.all(Config.destinations.map(getCityWeather));\n\n    getDestinationsWeather();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const getPriceInfo = async (destination: any) => {\n      let ticketInfo = await kiwiAPI.get(\n        Config.endpoints.GET_TICKET_INFO(\n          selectedCity.code,\n          destination.code,\n          moment(new Date()).format(Config.dateFormat),\n          moment(new Date()).add({ days: 1 }).format(Config.dateFormat)\n        ) //TODO add date as inputs\n      );\n      ticketInfo.data.length &&\n        setCities((cities) => {\n          //TODO this could be normalized, the property access would be much more immediate\n          const newState = cities.map((city) => {\n            if (city.name === destination.name) {\n              return {\n                ...city,\n                id: ticketInfo.data[0].id,\n                price: ticketInfo.data[0].price,\n              };\n            } else {\n              return city;\n            }\n          });\n          return orderBy(newState, 'price', 'asc');\n        });\n    };\n\n    const getDestinationsPrices = async () => {\n      setIsLoading(true);\n      await Promise.all(Config.destinations.map(getPriceInfo));\n      setIsLoading(false);\n    };\n\n    selectedCity?.name && getDestinationsPrices();\n  }, [selectedCity]);\n\n  return {\n    cities,\n    isLoading,\n    sortCities,\n  } as CityHook;\n};\n"],"sourceRoot":""}